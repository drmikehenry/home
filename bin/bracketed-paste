#!/bin/sh

usage()
{
    cat <<EOF
Enable or disable "bracketed paste" mode in terminal:

    bracketed-paste [enable|on|1]           # Enable
    bracketed-paste [disable|off|0]         # Disable

Can default to "disable" for readline()-based apps
by creating ~/.inputrc with contents::

    set enable-bracketed-paste off
EOF
    exit 1
}

bracketed_paste_enable()
{
    printf '\e[?2004h'
}

bracketed_paste_disable()
{
    printf '\e[?2004l'
}

case "$1" in
    1|on|enable)
        echo "Enabling bracketed paste"
        bracketed_paste_enable
        ;;

    0|off|disable)
        echo "Disabling bracketed paste"
        bracketed_paste_disable
        ;;

    *)
        usage
        ;;
esac
